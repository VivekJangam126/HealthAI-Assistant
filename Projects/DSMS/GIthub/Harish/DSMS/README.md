<!--
  DSMS README
  Generated by assistant â€” edit to personalize badges, links, and contact info.
-->

# ğŸ—‚ï¸ DSMS â€” Document Secure Management System

> A secure, user-friendly web app for uploading, storing, sharing, and managing documents â€” combining Firebase Auth & Firestore with optional IPFS pinning (Pinata) for decentralized storage.

---

## ğŸš€ Project Overview

- **Name:** DSMS (Document Secure Management System)
- **Current Version:** Phase 1 (Demo)
- **Goal:** Provide a decentralized, auditable document management system integrating Firebase and IPFS (via Pinata). Focus on secure uploads, granular sharing, access revocation, and activity logging.
-
- **Future Scope:** Client-side encryption, Filecoin/IPFS scaling, real-time notifications, advanced access policies.

---

## âš™ï¸ Tech Stack

- **Frontend:** HTML, CSS, JavaScript (Vanilla)
- **Backend:** Node.js + Express
- **Database:** Firebase Firestore
- **Authentication:** Firebase Auth + JWT cookie sessions
- **Storage:** Local server uploads + optional Pinata (IPFS)
- **Tools:** Postman (API testing), GitHub, VS Code, Copilot

---

## ğŸ—‚ï¸ Folder Structure

```
/DSMS
â”œâ”€â”€ /HTML        â†’ All HTML pages (auth.html, dashboard.html, documents.html, logs.html, share.html, ...)
â”œâ”€â”€ /CSS         â†’ Page-specific stylesheets (auth.css, dashboard.css, ...)
â”œâ”€â”€ /JS          â†’ Client-side logic (auth.js, documents.js, share.js, dashboard.js, ...)
â”œâ”€â”€ /backend     â†’ Express server, routes, controllers, config files
â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ /routes
â”‚   â”œâ”€â”€ /controllers
â”‚   â””â”€â”€ /uploads  (local file storage)
â”œâ”€â”€ .env         â†’ local env file (not committed)
â””â”€â”€ README.md
```

> Note: Keep service account and secrets out of version control. Use environment variables or CI secrets.

---

## ğŸ” Core Features

### ğŸ§¾ Authentication
- User registration & login using Firebase Auth
- JWT cookie session for protected routes (httpOnly)

### ğŸ“ Document Management
- Upload files (stored locally) and optionally pinned to IPFS via Pinata
- File metadata stored in Firestore (owner, fileSize, ipfsCid, uploadDate, status)
- View, download (permission-based), and delete files

### ğŸ”— File Sharing
- Share files by recipient email, permission (view / view+download), expiry time
- Lists: "Shared By Me" and "Shared With Me"
- Revoke access at any time

### ğŸ§® Logs & Activity Tracking
- Firestore `logs` collection records actions (upload, share, view, delete, revoke, auto-revoke)
- Recent activity and exportable logs

### ğŸ”” Notifications
- Lightweight notifications stored in Firestore (placeholder for Phase 2 real-time push)

### ğŸ‘¤ Profile & Settings
- View and update profile (display name, photo)
- LogoutAll, export data, delete account endpoints

---

## â˜ï¸ Firebase & Environment Configuration
1. Create a Firebase project.
2. Enable Authentication (Email/Password or preferred providers).
3. Enable Cloud Firestore (in test mode initially).
4. Create a Service Account key and save it to `backend/config/serviceAccountKey.json` (or point to it via env).

Add a `.env` file or set environment variables with the following keys:

```
FIREBASE_API_KEY=...
FIREBASE_AUTH_DOMAIN=...
FIREBASE_PROJECT_ID=...
JWT_SECRET=your_jwt_secret_here
PINATA_JWT=your_pinata_jwt_here
GOOGLE_APPLICATION_CREDENTIALS=./backend/config/serviceAccountKey.json
```

> Security: Never commit your service account or tokens. Use CI/CD secret stores for deployments.

---

## ğŸ§° Installation & Quick Start

1. Clone the repository:

```bash
git clone https://github.com/<username>/DSMS.git
cd DSMS/backend
```

2. Install dependencies:

```bash
npm install
```

3. Start the backend server (PowerShell example):

```powershell
# from backend folder
$env:GOOGLE_APPLICATION_CREDENTIALS = 'C:\path\to\serviceAccountKey.json'
$env:JWT_SECRET = 'a_long_random_secret'
node server.js
```

4. Open the frontend pages (served by the Express static middleware):

- http://localhost:3000/HTML/index.html
- http://localhost:3000/HTML/dashboard.html

> For quick static preview (frontend-only) you can serve `HTML` with a static server locally (Python or VS Code Live Server) but backend routes require the Node server.

---

## ğŸ§­ API Reference (Common Endpoints)

| Method | Endpoint | Description |
|---|---:|---|
| POST | /api/auth/register | Register new user (Firebase) |
| POST | /api/auth/login | Login and set JWT cookie |
| GET  | /api/auth/logout | Logout (clear cookie) |
| POST | /api/documents/upload | Upload file (multipart/form-data) |
| GET  | /api/documents/list | List your documents |
| DELETE | /api/documents/delete/:id | Delete document |
| POST | /api/shares/create | Create a share entry |
| GET  | /api/shares/sharedByMe | Shares you created |
| GET  | /api/shares/sharedWithMe | Shares shared with you |
| POST | /api/shares/revoke/:shareId | Revoke a share |
| GET  | /api/logs/my | My logs (recent) |
| GET  | /api/dashboard/summary | Dashboard aggregated summary (stats & charts) |

> Most endpoints require the auth cookie `dsms_token` and are protected by middleware `requireAuth`.

---

## ğŸ–¥ï¸ Frontend Notes
- Vanilla JS pages located in `/JS` call the above API routes using `fetch(..., { credentials: 'include' })` so the httpOnly JWT cookie is sent.
- Dashboard uses Chart.js (CDN) to render: Uploads per Week, Shares per Week, and Storage Usage.
- UI styling: CSS under `/CSS` (dark theme with neon accents). You can edit `dashboard.css` for layout or theming.

---

## ğŸ”§ Development Tips & Troubleshooting
- Server exit with code 1: usually caused by missing `GOOGLE_APPLICATION_CREDENTIALS` or invalid service account file. Ensure the path is correct and readable.
- Pinata 401: verify `PINATA_JWT` is valid and has appropriate pinning scopes.
- Firestore index errors: Firestore will respond with a console link to create required composite indexes â€” follow the link to create indexes.
- Local file storage: uploaded files are saved in `/backend/uploads`. Use caution when deleting or cleaning this folder.

---

## ğŸ”® Future Enhancements (Planned)
- Client-side encryption before uploading (end-to-end encryption)
- Migrate pinning to Web3.Storage / Filecoin for long-term storage
- Real-time notifications via WebSockets or Firebase Realtime Database
- AI features: document classification, OCR, automated tagging
- Role-based access control and organization-level sharing

---

## ğŸ‘¥ Team & Roles
| Role | Name | Responsibilities |
|---|---|---|
| Hariish Kale | Frontend Dev | UI, animations, dashboard UX |
| Vivek Jangam| Backend Dev | API, auth, uploads, integrations |
| Srushti Jain | Firebase Specialist | Firestore rules & auth configs |
| Siddhesh Jadhav | IPFS Specialist | Pinata integration, pin/unpin, IPFS workflows |

---

## ğŸ“š References & Resources
- Firebase â€” https://firebase.google.com/docs
- Pinata API â€” https://docs.pinata.cloud
- IPFS â€” https://ipfs.tech
- Chart.js â€” https://www.chartjs.org
- Node.js â€” https://nodejs.org
- Express â€” https://expressjs.com

---

## ğŸ“ License & Contributions
- This repository is provided as-is for demo & educational purposes. Add your own LICENSE file to define terms.
- Contributions: fork â†’ feature branch â†’ PR with description & tests.

---

## ğŸ¯ Final Notes
DSMS is a Phase 1 demo showcasing a pragmatic integration of web2 (Firebase) and web3 (IPFS) storage patterns. It emphasizes auditability, user control over sharing, and a foundation for future security and decentralized improvements.

If you'd like, I can:
- Add a smaller `README.dev.md` with development commands and debugging tips.
- Generate a visual diagram (SVG) of the data flow (Auth â†’ Upload â†’ Pinata â†’ Firestore â†’ Share) and embed it here.

---

*Generated on: 2025-11-02*
